---
layout: post
title: DES加密
date: 2014-11-10 13:20:59
tags: DES
categories: 未分类
---

DES（Data Encrypt Standard数据库加密标准）是对称加密算法。

在《信息安全》课上，老师要求用C语言实现DES算法，如果你用C++或者JAVA，同样的代码，估计要慢10倍。

废话不多说，直接上代码。 

>程序组织结构

	.
	├── des.cpp
	├── des.h
	├── des_test.cpp
	└── makefile	

	0 directories, 4 files
	

>[des.cpp](https://github.com/ligelaige/some_cpp_code/blob/master/des/des.cpp)

	/**
	 * 文件比较长，直接转下载查看吧！
	 */

***[des.cpp](https://github.com/ligelaige/some_cpp_code/blob/master/des/des.cpp)***
	 
>[des.h](https://github.com/ligelaige/some_cpp_code/blob/master/des/des.h)

	#ifndef _DES_H_
	#define _DES_H_

	enum { ENCRYPT, DECRYPT };

	// 加密/解密 Type=ENCRYPT:加密,DECRYPT:解密
	void Des_Run(char Out[8], char In[8], bool Type = ENCRYPT);
	// 设置密钥
	void Des_SetKey(const char Key[8]);

	#endif
	
>[des_test.cpp](https://github.com/ligelaige/some_cpp_code/blob/master/des/des_test.cpp)

	/*************************************************************************
		>    File Name: des_test.cpp
		>       Author: huangjinqiang
		>        Email: ligelaige@gmail.com
		> Created Time: Tue 04 Nov 2014 11:27:19 PM CST
	 ************************************************************************/

	#include <stdio.h>
	#include "des.h"

	#define SIZE 128

	unsigned getaline(char* str)
	{
		char c='\n';
		unsigned i = 0;
		do
		{
			c = getchar();
			str[i++] = c;
		} while(c != '\n');
	
		str[i-1] = '\0';
		return i-1;
	}

	void writeline(const char a[], const char b[])
	{
		printf("%s: [", a);
		printf("%s", b);
		printf("]\n");
	}

	int main(void)
	{
		char key[8]={1,9,8,0,9,1,7};
		char str[SIZE];
		Des_SetKey(key);
	
		printf("Enter a string(<=128): ");
		unsigned length = getaline(str);

		writeline("Before encrypting", str);

		for (int i=0; i<length; i+= 8)
		{
			Des_Run(str+i, str+i, ENCRYPT);
		}
		writeline("After  encrypting", str);

		for (int i=0; i<length; i+= 8)
		{
			Des_Run(str+i, str+i, DECRYPT);
		}
		writeline("After  decrypting", str);

		return 0;
	}
	

>[makefile](https://github.com/ligelaige/some_cpp_code/blob/master/des/makefile)

	main: des.o des_test.o
		g++ -o main des.o des_test.o

	des.o: des.cpp
		g++ -c des.cpp

	des_test.o: des_test.cpp
		g++ -c des_test.cpp

	clean:
		rm *.o
		
(完)
		
	
